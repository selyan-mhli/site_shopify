<section class="product-main py-16 bg-dark-950">
  <div class="container mx-auto px-6">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
      <div class="product-gallery">
        <div class="aspect-square rounded-xl overflow-hidden bg-dark-900 mb-4">
          {% if product.featured_image %}
            <img 
              src="{{ product.featured_image | image_url: width: 1200 }}"
              alt="{{ product.featured_image.alt | escape }}"
              class="w-full h-full object-cover"
              id="product-main-image"
            >
          {% endif %}
        </div>
        
        {% if product.images.size > 1 %}
          <div class="grid grid-cols-4 gap-3">
            {% for image in product.images %}
              <button 
                class="aspect-square rounded-lg overflow-hidden bg-dark-900 border-2 border-transparent hover:border-primary-500 transition-colors {% if forloop.first %}border-primary-500{% endif %}"
                data-image-url="{{ image | image_url: width: 1200 }}"
              >
                <img 
                  src="{{ image | image_url: width: 200 }}"
                  alt="{{ image.alt | escape }}"
                  class="w-full h-full object-cover"
                  loading="lazy"
                >
              </button>
            {% endfor %}
          </div>
        {% endif %}
      </div>
      
      <div class="product-info">
        {% if product.vendor %}
          <p class="text-sm text-dark-500 font-mono uppercase tracking-wider mb-2">{{ product.vendor }}</p>
        {% endif %}
        
        <h1 class="text-3xl md:text-4xl font-bold text-dark-100 mb-4">{{ product.title }}</h1>
        
        <div class="flex items-center gap-4 mb-6">
          <span class="text-2xl font-bold text-dark-100">{{ product.selected_or_first_available_variant.price | money }}</span>
          {% if product.compare_at_price_max > product.price %}
            <span class="text-lg text-dark-500 line-through">{{ product.compare_at_price_max | money }}</span>
            <span class="px-2 py-1 bg-primary-600 text-white text-xs font-medium rounded">Sale</span>
          {% endif %}
        </div>
        
        {% form 'product', product, class: 'product-form' %}
          <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">
          
          {% unless product.has_only_default_variant %}
            {% for option in product.options_with_values %}
              <div class="mb-6">
                <label class="block text-sm font-medium text-dark-300 mb-3">{{ option.name }}</label>
                <div class="flex flex-wrap gap-2">
                  {% for value in option.values %}
                    <button 
                      type="button"
                      class="px-4 py-2 border border-dark-700 rounded-lg text-sm text-dark-300 hover:border-primary-500 hover:text-primary-400 transition-colors {% if option.selected_value == value %}border-primary-500 text-primary-400{% endif %}"
                      data-option-name="{{ option.name }}"
                      data-option-value="{{ value }}"
                    >
                      {{ value }}
                    </button>
                  {% endfor %}
                </div>
              </div>
            {% endfor %}
          {% endunless %}
          
          <div class="flex items-center gap-4 mb-8">
            <div class="flex items-center border border-dark-700 rounded-lg">
              <button type="button" class="w-12 h-12 flex items-center justify-center text-dark-400 hover:text-primary-400 transition-colors" data-quantity-minus>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4"/>
                </svg>
              </button>
              <input 
                type="number" 
                name="quantity" 
                value="1" 
                min="1" 
                class="w-16 h-12 bg-transparent text-center text-dark-100 font-medium focus:outline-none"
              >
              <button type="button" class="w-12 h-12 flex items-center justify-center text-dark-400 hover:text-primary-400 transition-colors" data-quantity-plus>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
                </svg>
              </button>
            </div>
            
            <button 
              type="submit" 
              class="flex-1 btn-primary h-12"
              {% unless product.available %}disabled{% endunless %}
            >
              {% if product.available %}
                Add to Cart
              {% else %}
                Sold Out
              {% endif %}
            </button>
          </div>
        {% endform %}
        
        {% if product.description != blank %}
          <div class="product-description prose prose-invert prose-sm max-w-none border-t border-dark-800 pt-8">
            {{ product.description }}
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Product Main",
  "settings": [],
  "presets": []
}
{% endschema %}
